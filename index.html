<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Redox Quiz</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #6B73FF 0%, #000DFF 100%);
    color: #fff;
    margin: 0; padding: 0;
    min-height: 100vh;
  }
  header {
    display: flex; align-items: center; padding: 10px 15px; background: #1a1aff;
  }
  header img {
    height: 50px;
    margin-right: 15px;
  }
  header h1 {
    font-size: 24px;
    margin: 0;
    font-weight: 700;
  }
  main {
    max-width: 600px;
    margin: 30px auto 60px;
    padding: 0 15px;
  }
  .question {
    background: rgba(255 255 255 / 0.1);
    border-radius: 8px;
    padding: 15px;
    display: none;
  }
  .question.active {
    display: block;
  }
  .question h3 {
    margin-top: 0;
  }
  label {
    display: block;
    margin: 8px 0;
    cursor: pointer;
  }
  input[type="radio"] {
    margin-right: 8px;
  }
  #navigation {
    margin-top: 15px;
    text-align: center;
  }
  button, #nextBtn {
    background: #FF5F6D;
    background-image: linear-gradient(315deg, #FF5F6D 0%, #FFC371 74%);
    border: none;
    padding: 15px 25px;
    font-size: 18px;
    color: #fff;
    border-radius: 50px;
    cursor: pointer;
    transition: background 0.3s ease;
    margin: 5px;
  }
  button:hover, #nextBtn:hover {
    background-image: linear-gradient(315deg, #FFC371 0%, #FF5F6D 74%);
  }

  /* Status Panel */
  #statusPanel {
    display: flex;
    justify-content: center;
    margin-bottom: 25px;
    gap: 12px;
  }
  .status-circle {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    line-height: 28px;
    text-align: center;
    font-weight: 700;
    cursor: pointer;
    user-select: none;
    color: #000;
  }
  .unanswered {
    background: #bbb;
  }
  .answered {
    background: #4caf50;
    color: #fff;
  }
  .skipped {
    background: #ff9800;
    color: #fff;
  }

  /* Modal Styles */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999;
  }
  .modal {
    background: #121a4a;
    padding: 25px 30px;
    border-radius: 12px;
    max-width: 400px;
    color: #fff;
    text-align: center;
    box-shadow: 0 0 25px #FF5F6D;
  }
  .modal h2 {
    margin-top: 0;
  }
  .modal p {
    font-size: 16px;
    margin: 20px 0;
  }
  .modal button {
    margin-top: 10px;
    font-size: 18px;
    width: 100%;
  }

  footer {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    background: #000DFF;
    text-align: center;
    padding: 8px;
    font-size: 14px;
    color: #fff;
  }
  @media (max-width: 480px) {
    main {
      margin: 20px 10px 70px;
    }
    button, #nextBtn {
      width: 100%;
      padding: 15px;
    }
    #statusPanel {
      gap: 8px;
      flex-wrap: wrap;
    }
  }
</style>
</head>
<body>

<header>
  <img src="https://i.ibb.co/fvPPbZK/logo.png" alt="Redox Quiz Logo" />
  <h1>Redox Reaction Quiz</h1>
</header>

<main>
  <div id="statusPanel" aria-label="Question status navigation"></div>

  <form id="quizForm" novalidate>
    <div class="question active" id="q1">
      <h3>1. What is the oxidation state of Mn in KMnO<sub>4</sub>?</h3>
      <label><input type="radio" name="q1" value="a" /> +7</label>
      <label><input type="radio" name="q1" value="b" /> +6</label>
      <label><input type="radio" name="q1" value="c" /> +4</label>
      <label><input type="radio" name="q1" value="d" /> +2</label>
    </div>

    <div class="question" id="q2">
      <h3>2. In the reaction Zn + Cu<sup>2+</sup> → Zn<sup>2+</sup> + Cu, which element is oxidized?</h3>
      <label><input type="radio" name="q2" value="a" /> Zn</label>
      <label><input type="radio" name="q2" value="b" /> Cu</label>
      <label><input type="radio" name="q2" value="c" /> Both</label>
      <label><input type="radio" name="q2" value="d" /> None</label>
    </div>

    <div class="question" id="q3">
      <h3>3. Which of the following is a reducing agent?</h3>
      <label><input type="radio" name="q3" value="a" /> H<sub>2</sub>O</label>
      <label><input type="radio" name="q3" value="b" /> Na</label>
      <label><input type="radio" name="q3" value="c" /> O<sub>2</sub></label>
      <label><input type="radio" name="q3" value="d" /> Cl<sub>2</sub></label>
    </div>

    <div class="question" id="q4">
      <h3>4. Which element acts as an oxidizing agent in Fe<sup>3+</sup> + e<sup>-</sup> → Fe<sup>2+</sup>?</h3>
      <label><input type="radio" name="q4" value="a" /> Fe<sup>3+</sup></label>
      <label><input type="radio" name="q4" value="b" /> Fe<sup>2+</sup></label>
      <label><input type="radio" name="q4" value="c" /> e<sup>-</sup></label>
      <label><input type="radio" name="q4" value="d" /> None</label>
    </div>

    <div class="question" id="q5">
      <h3>5. In the reaction 2Na + Cl<sub>2</sub> → 2NaCl, which is oxidized?</h3>
      <label><input type="radio" name="q5" value="a" /> Na</label>
      <label><input type="radio" name="q5" value="b" /> Cl<sub>2</sub></label>
      <label><input type="radio" name="q5" value="c" /> Both</label>
      <label><input type="radio" name="q5" value="d" /> None</label>
    </div>

    <div id="navigation">
      <button type="button" id="nextBtn">Next Question</button>
      <button type="submit" id="submitBtn" style="display:none;">Submit Quiz</button>
    </div>
  </form>
</main>

<!-- Instructions Modal -->
<div id="instructionsModal" class="modal-overlay">
  <div class="modal">
    <h2>Instructions</h2>
    <p>
      - There are 5 questions.<br/>
      - You can leave any question unanswered.<br/>
      - Select the best answer for each.<br/>
      - After submitting, you will see your score and detailed solutions.<br/>
      - Use the "Next Question" button to navigate.<br/>
      - Have fun!
    </p>
    <button id="startQuizBtn">Start Quiz</button>
  </div>
</div>

<footer>Redox Quiz © 2025</footer>

<script>
  const modal = document.getElementById('instructionsModal');
  const startBtn = document.getElementById('startQuizBtn');
  const form = document.getElementById('quizForm');
  const nextBtn = document.getElementById('nextBtn');
  const submitBtn = document.getElementById('submitBtn');
  const statusPanel = document.getElementById('statusPanel');
  const questions = Array.from(document.querySelectorAll('.question'));
  let currentIndex = 0;

  // Show instructions modal on page load
  window.onload = () => {
    modal.style.display = 'flex';
    buildStatusPanel();
    updateStatusPanel();
  };

  startBtn.addEventListener('click', () => {
    modal.style.display = 'none';
    showQuestion(currentIndex);
  });

  function showQuestion(index) {
    questions.forEach((q, i) => {
      q.classList.toggle('active', i === index);
    });
    updateStatusPanel();
    // Show submit button only on last question
    if(index === questions.length -1){
      nextBtn.style.display = 'none';
      submitBtn.style.display = 'inline-block';
    } else {
      nextBtn.style.display = 'inline-block';
      submitBtn.style.display = 'none';
    }
  }

  // Build status panel circles
  function buildStatusPanel() {
    statusPanel.innerHTML = '';
    questions.forEach((q, i) => {
      const circle = document.createElement('div');
      circle.className = 'status-circle unanswered';
      circle.textContent = i + 1;
      circle.title = `Go to Question ${i + 1}`;
      circle.tabIndex = 0;
      circle.setAttribute('role', 'button');
      circle.addEventListener('click', () => {
        currentIndex = i;
        showQuestion(currentIndex);
      });
      circle.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          currentIndex = i;
          showQuestion(currentIndex);
        }
      });
      statusPanel.appendChild(circle);
    });
  }

  // Update colors in status panel based on answer state
  function updateStatusPanel() {
    questions.forEach((q, i) => {
      const circle = statusPanel.children[i];
      const name = q.querySelector('input[type="radio"]').name;
      const inputs = q.querySelectorAll('input[type="radio"]');
      let answered = false;
      let skipped = false;

      // Check if any option is selected
      inputs.forEach(input => {
        if(input.checked) answered = true;
      });

      // If currently displayed question and no answer yet, but user clicked next, mark skipped
      if(!answered && i < currentIndex) {
        skipped = true;
      }

      if(answered) {
        circle.className = 'status-circle answered';
      } else if(skipped) {
        circle.className = 'status-circle skipped';
      } else {
        circle.className = 'status-circle unanswered';
      }
    });
  }

  // When user clicks Next Question button
  nextBtn.addEventListener('click', () => {
    // Mark current question as skipped if unanswered
    updateStatusPanel();

    if(currentIndex < questions.length -1) {
      currentIndex++;
      showQuestion(currentIndex);
    }
  });

  // On any answer change, update the status panel colors
  form.addEventListener('change', e => {
    updateStatusPanel();
  });

  // Submit event
  const answers = {
    q1: 'a',
    q2: 'a',
    q3: 'b',
    q4: 'a',
    q5: 'a'
  };

  const solutions = {
    q1: 'The oxidation state of Mn in KMnO4 is +7.',
    q2: 'Zn loses electrons, so Zn is oxidized.',
    q3: 'Na is a strong reducing agent.',
    q4: 'Fe3+ gains electrons and acts as oxidizing agent.',
    q5: 'Na is oxidized as it loses electrons to form NaCl.'
  };

  form.addEventListener('submit', function (e) {
    e.preventDefault();

    const userAnswers = {};
    let score = 0;
    let total = Object.keys(answers).length;

    for(let q in answers) {
      const radios = form.elements[q];
      let userAnswer = null;
      if(radios) {
        for(let r of radios) {
          if(r.checked) {
            userAnswer = r.value;
            break;
          }
        }
      }
      userAnswers[q] = userAnswer;
      if(userAnswer === answers[q]) score++;
    }

    localStorage.setItem('redoxQuizUserAnswers', JSON.stringify(userAnswers));
    localStorage.setItem('redoxQuizScore', score);
    localStorage.setItem('redoxQuizTotal', total);
    localStorage.setItem('redoxQuizSolutions', JSON.stringify(solutions));

    window.location.href = 'solutions.html';
  });
</script>

</body>
</html>